=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2018.10.24 09:45:43 =~=~=~=~=~=~=~=~=~=~=~=
login as: vagrant
vagrant@192.168.33.50's password: 
Welcome to Ubuntu 14.04.5 LTS (GNU/Linux 3.13.0-125-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

  System information as of Wed Oct 24 04:11:59 UTC 2018

  System load:  0.74              Processes:           85
  Usage of /:   3.9% of 39.34GB   Users logged in:     0
  Memory usage: 28%               IP address for eth0: 10.0.2.15
  Swap usage:   0%                IP address for eth1: 192.168.33.50

  Graph this data and manage this system at:
    https://landscape.canonical.com/

  Get cloud support with Ubuntu Advantage Cloud Guest:
    http://www.ubuntu.com/business/services/cloud

179 packages can be updated.
143 updates are security updates.

New release '16.04.5 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Tue Oct 23 08:32:13 2018 from 192.168.33.1
vagrant@puppet:~$ sudo su -
root@puppet:~# root@puppet:~# cd /etc/puppet/
root@puppet:/etc/puppet# ls -ltra
total 52
-rwxr-xr-x  1 root   root    256 Feb 20  2014 etckeeper-commit-pre
-rwxr-xr-x  1 root   root    245 Feb 20  2014 etckeeper-commit-post
-rw-r--r--  1 root   root   1462 Apr 25  2016 fileserver.conf
-rw-r--r--  1 root   root   4178 Apr 25  2016 auth.conf
drwxr-xr-x  2 root   root   4096 Jun  2  2017 templates
drwxr-xr-x  3 root   root   4096 Oct 22 10:35 environments
drwxrwx--x  8 puppet puppet 4096 Oct 22 10:53 ssl
-rw-r--r--  1 root   root    364 Oct 22 10:54 puppet.conf
drwxr-xr-x  7 root   root   4096 Oct 22 10:54 .
drwxr-xr-x  3 root   root   4096 Oct 23 04:39 modules
drwxr-xr-x  2 root   root   4096 Oct 23 11:13 manifests
drwxr-xr-x 96 root   root   4096 Oct 24 04:11 ..
root@puppet:/etc/puppet# vi puppet.conf 
  "puppet.conf" 14L, 364C[main]
logdir=/var/log/puppet
vardir=/var/lib/puppet
ssldir=/var/lib/puppet/ssl
rundir=/var/run/puppet
factpath=$vardir/lib/facter
templatedir=$confdir/templates

[master]
# These are needed when the puppetmaster is run by passenger
# and can safely be removed if webrick is used.
ssl_client_header = SSL_CLIENT_S_DN
ssl_client_verify_header = SSL_CLIENT_VERIFY

~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --1,1All[main]2345678
[master]9[master]10,11234$21e2n3v4i5r6o7n8m9e10n1t2p3a4t5h67=89$20c1o2n3f4d5i6r7/8e9n30v1i2r3o4n5m6e7n8t9s4014,39All:wq!"puppet.conf" 14L, 403C written
root@puppet:/etc/puppet# cat environments/
cat: environments/: Is a directory
root@puppet:/etc/puppet# cd enbvironments/
root@puppet:/etc/puppet/environments# ls
example_env
root@puppet:/etc/puppet/environments# tree example_env/
The program 'tree' is currently not installed. You can install it by typing:
apt-get install tree
root@puppet:/etc/puppet/environments# apt-get install tree
Reading package lists... 0%Reading package lists... 100%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree       
Reading state information... 0%Reading state information... 0%Reading state information... Done
The following packages were automatically installed and are no longer required:
  ruby-rgen ruby-safe-yaml
Use 'apt-get autoremove' to remove them.
The following NEW packages will be installed:
  tree
0 upgraded, 1 newly installed, 0 to remove and 175 not upgraded.
Need to get 37.8 kB of archives.
After this operation, 109 kB of additional disk space will be used.
0% [Working]            0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]0% [Connecting to archive.ubuntu.com (91.189.88.149)]                                                     0% [Waiting for headers]0% [Waiting for headers]                        Get:1 http://archive.ubuntu.com/ubuntu/ trusty/universe tree amd64 1.6.0-1 [37.8 kB]
                        53% [1 tree 20.0 kB/37.8 kB 53%]                                100% [Working]              Fetched 37.8 kB in 35s (1,075 B/s)
Selecting previously unselected package tree.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 63659 files and directories currently installed.)
Preparing to unpack .../tree_1.6.0-1_amd64.deb ...
Unpacking tree (1.6.0-1) ...
Processing triggers for man-db (2.6.7.1-1ubuntu1) ...
Setting up tree (1.6.0-1) ...
root@puppet:/etc/puppet/environments# tree example_env/
example_env/
 manifests
 modules
 README.environment

2 directories, 1 file
root@puppet:/etc/puppet/environments# cp -r example_env/ dev/
root@puppet:/etc/puppet/environments# ls
dev  example_env
root@puppet:/etc/puppet/environments# cd dev
root@puppet:/etc/puppet/environments/dev# ls
manifests  modules  README.environment
root@puppet:/etc/puppet/environments/dev# cd manifests/
root@puppet:/etc/puppet/environments/dev/manifests# vi app.pp
root@puppet:/etc/puppet/environments/dev/manifests# 
root@puppet:/etc/puppet/environments/dev/manifests# cd /etc/ /etc/p /etc/puppet/manifests/nodep1.pp app.pp
root@puppet:/etc/puppet/environments/dev/manifests# ls
app.pp
root@puppet:/etc/puppet/environments/dev/manifests# cat app.pp
node nodep1 {
   notify{'Welcome': message => "specific to nodep1"}
  # include apache2
class{'apache2':
       apacheport => 8081
}
}
root@puppet:/etc/puppet/environments/dev/manifests# vi node
root@puppet:/etc/puppet/environments/dev/manifests# 
root@puppet:/etc/puppet/environments/dev/manifests# vi app.pp 
  "app.pp" 7L, 135Cnode nodep1 {
   notify{'Welcome': message => "specific to nodep1"}
  # include apache2
class{'apache2':apacheport => 8081
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --1,1All2345/ nodep1 {678910122321109 8765 / nodep1 {678nodep1 {78910123 {2[ {1,13All0 {4- {59 {6[0-9] {1,17All[0-9]/ {81,17All:wq!"app.pp" 7L, 141C written
root@puppet:/etc/puppet/environments/dev/manifests# cat app.pp 
node /nodep[0-9]/ {
   notify{'Welcome': message => "specific to nodep1"}
  # include apache2
class{'apache2':
       apacheport => 8081
}
}
root@puppet:/etc/puppet/environments/dev/manifests# cd ../..../..
root@puppet:/etc/puppet# cd manifests/
root@puppet:/etc/puppet/manifests# ls
init.pp  nodep1.pp  nodep2.pp  site.pp
root@puppet:/etc/puppet/manifests# cat dev/null > site.pp 
cat: dev/null: No such file or directory
root@puppet:/etc/puppet/manifests# cat dev/null > site.pp /
root@puppet:/etc/puppet/manifests# ls
init.pp  nodep1.pp  nodep2.pp  site.pp
root@puppet:/etc/puppet/manifests# cat site.pp 
root@puppet:/etc/puppet/manifests# service puppetmaster restart
 * Restarting puppet master        start-stop-daemon: warning: failed to kill 1116: No such process
[ OK ]
root@puppet:/etc/puppet/manifests# service puppetmaster staustus
 * master is running
root@puppet:/etc/puppet/manifests# cd ../environments/
root@puppet:/etc/puppet/environments# ls
dev  example_env  production
root@puppet:/etc/puppet/environments# ls -latr
total 20
drwxr-xr-x 4 root root 4096 Oct 22 10:35 example_env
drwxr-xr-x 7 root root 4096 Oct 24 04:27 ..
drwxr-xr-x 4 root root 4096 Oct 24 04:30 dev
drwxr-xr-x 2 root root 4096 Oct 24 04:51 production
drwxr-xr-x 5 root root 4096 Oct 24 04:51 .
root@puppet:/etc/puppet/environments# cp -r dev prod
root@puppet:/etc/puppet/environments# cd prod
root@puppet:/etc/puppet/environments/prod# ls
manifests  modules  README.environment
root@puppet:/etc/puppet/environments/prod# cd manifests/
root@puppet:/etc/puppet/environments/prod/manifests# ls
app.pp
root@puppet:/etc/puppet/environments/prod/manifests# vi app.pp
  "app.pp" 7L, 141Cnode /nodep[0-9]/ {
   notify{'Welcome': message => "specific to nodep1"}
  # include apache2
class{'apache2':apacheport => 8081
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --1,1All223456789y{}102,11All{}234567892012345678930123456789401234567895012{}32,54All3{}2{}3}2}1}0}49}8}7}6}5}4}3}2}1}0}39}8}7}6}5}4}3}2}1}0}29{}2,28All:wq!"app.pp" 7L, 117C written
root@puppet:/etc/puppet/environments/prod/manifests# puppet cert list --all
Warning: Setting templatedir is deprecated. See http://links.puppetlabs.com/env-settings-deprecations
   (at /usr/lib/ruby/vendor_ruby/puppet/settings.rb:1139:in `issue_deprecation_warning')
  "nodep2.in.oracle.com"                     (SHA256) D4:E5:45:BE:78:3A:C4:2C:70:DC:49:CE:E4:21:28:AF:76:D4:C3:0C:EC:35:55:21:35:00:BE:D2:D2:03:DD:99
  "vagrant-ubuntu-trusty-64.in.oracle.com"   (SHA256) CB:09:55:AA:80:90:FC:AE:4F:D0:03:8E:3C:3C:E5:9D:C8:DA:87:D6:8D:62:55:64:AF:BF:F0:25:F7:7E:4C:38
  "vagrant-ubuntu-trusty-64.wifi.oracle.com" (SHA256) 35:BD:4F:99:F6:16:49:CC:14:8C:12:00:40:88:D7:07:B2:FE:CB:F5:FF:19:3F:07:DF:6C:4B:01:4F:CB:86:1C
+ "nodep1.in.oracle.com"                     (SHA256) CD:14:BA:9A:C6:AA:AF:BE:0A:F5:7C:48:46:A0:0F:DA:0A:FF:E7:6D:82:28:FE:B5:BD:58:93:29:7D:B4:BA:57
+ "nodep1.wifi.oracle.com"                   (SHA256) 36:BC:2B:F6:3F:4D:26:32:5D:C3:27:92:83:AD:85:DF:9C:19:E2:23:3E:EC:93:F1:2A:D8:C3:93:1B:82:F9:08
+ "nodep2.wifi.oracle.com"                   (SHA256) BE:84:B5:50:D7:9A:78:62:1E:D3:F7:4E:18:D2:05:18:86:C2:0C:57:D7:23:CF:60:B1:4E:EC:E4:4C:3F:D0:5F
+ "puppet.in.oracle.com"                     (SHA256) F4:2A:6C:83:FB:7F:6C:A8:0B:EB:68:61:E1:32:30:CC:D9:5D:6D:71:B7:00:8C:6D:79:6C:7E:3F:E0:44:59:88 (alt names: "DNS:puppet", "DNS:puppet.in.oracle.com")
+ "puppet.wifi.oracle.com"                   (SHA256) 5E:78:DB:62:9A:85:A3:3B:2D:11:F3:E5:C4:11:F4:34:3C:28:94:B4:04:3E:C6:57:43:3A:EC:81:F7:86:7D:03 (alt names: "DNS:puppet", "DNS:puppet.wifi.oracle.com")
root@puppet:/etc/puppet/environments/prod/manifests# puppet cert sign nodep2.in.oracle.com
Warning: Setting templatedir is deprecated. See http://links.puppetlabs.com/env-settings-deprecations
   (at /usr/lib/ruby/vendor_ruby/puppet/settings.rb:1139:in `issue_deprecation_warning')
Notice: Signed certificate request for nodep2.in.oracle.com
Notice: Removing file Puppet::SSL::CertificateRequest nodep2.in.oracle.com at '/var/lib/puppet/ssl/ca/requests/nodep2.in.oracle.com.pem'
root@puppet:/etc/puppet/environments/prod/manifests# vi app.pp 
  "app.pp" 7L, 117Cnode /nodep[0-9]/ {
   notify{'Welcome': message}
  # include apache2
class{'apache2':apacheport => 8081
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All23456789101p[0-9]2[0-9]345[0-9]6[0-9]78 {}9{}22012345678{}9{}8765-- INSERT --2,25All678{}9}8}7}6}5}4}3}2}1{}2,20All:wq!"app.pp" 7L, 109C written
root@puppet:/etc/puppet/environments/prod/manifests# cd ../../..
root@puppet:/etc/puppet# vi puppet.congf
  "puppet.conf" 14L, 403C[main]
logdir=/var/log/puppet
vardir=/var/lib/puppet
ssldir=/var/lib/puppet/ssl
rundir=/var/run/puppet
factpath=$vardir/lib/facter
templatedir=$confdir/templates

[master]
# These are needed when the puppetmaster is run by passenger
# and can safely be removed if webrick is used.
ssl_client_header = SSL_CLIENT_S_DN
ssl_client_verify_header = SSL_CLIENT_VERIFY
environmentpath = $confdir/environments
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --1,1All[main]2345678
[master]9[master]10,1123423456789101234567892012345678930123456789405,1 h2i3e4r5a6_7c8o9n10f1i2g34=56$7c8o9n20f1d2i3r4/5h6i7e8r9a30.1y2a3m4l515,34All:wq!"puppet.conf" 15L, 438C written
root@puppet:/etc/puppet# cd puppenvironments/
root@puppet:/etc/puppet/environments# cd dev/ls
dev  example_env  prod  production
root@puppet:/etc/puppet/environments# cd dev
root@puppet:/etc/puppet/environments/dev# mkdir hieradata
root@puppet:/etc/puppet/environments/dev# cd ../mkdir ../prod/hieradata
root@puppet:/etc/puppet/environments/dev# cd hieradata
root@puppet:/etc/puppet/environments/dev/hieradata# vi defaults.yaml
  "defaults.yaml" [New File]~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            0,0-1All-- INSERT --0,1Alls1,2o3m4e5v6a7r8somevar:910s1o2m3e4v5a6l7u8e91,18All:wq!"defaults.yaml" [New] 1L, 19C written
root@puppet:/etc/puppet/environments/dev/hieradata# cat defaults.yaml 
somevar: somevalue
root@puppet:/etc/puppet/environments/dev/hieradata# cd ../manifests/app. ../manifests/app. ../manifests/app.v ../manifests/app.i ../manifests/app.pp 
  "../manifests/app.pp" 7L, 141Cnode /nodep[0-9]/ {
   notify{'Welcome': message => "specific to nodep1"}
  # include apache2
class{'apache2':apacheport => 8081
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --1,1All232345678910123456789204,1All5,1All4234$5f6r7o8m9h10i1e2r3a45=67h8i9e20r1a232{}4,23All}}4,24All}4,23All}21a2(4,23All()4,24All3')4s)5o)6m)7e)8v)9a)30r)1')24,33All()5,1 23n4o5t6i7f8y9{}5,10All}}5,11All0:}1}0"}1"}2{""}6~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            9,1Bot}8,1Botapacheport => 80817,1Botclass{'apache2':6,1Botnotify{""}5,1Bot$fromhiera = hiera('somevar')4,1Bot# include apache23,1Botnotify{'Welcome': message => "specific to nodep1"}2,1Botnode /nodep[0-9]/ {1,1All23452345678y{""}95,10All{""}1{""}2{""}1v"}2a"}3l"}4u"}5e"}6 "}7f"}8r"}9o"}20m"}1 "}2h"}3i"}4e"}5r"}6a"}7 "}8$"}9f"}30r"}1o"}2m"}3h"}4i"}5e"}6r"}7a"}8{}9:}40{}5,39All:wq!"../manifests/app.pp" 9L, 215C written
root@puppet:/etc/puppet/environments/dev/hieradata# cat defaults.yaml 
somevar: somevalue
root@puppet:/etc/puppet/environments/dev/hieradata# (reverse-i-search)`':m': cat defaults.yamla': vi ../manifests/app.pps': service puppetmaster statusterroot@puppet:/etc/puppet/environments/dev/hieradata# service puppetmaster status\restart
 * Restarting puppet master        [ OK ]
root@puppet:/etc/puppet/environments/dev/hieradata# cd ..cd ../../..
root@puppet:/etc/puppet# cat puppet.conf 
[main]
logdir=/var/log/puppet
vardir=/var/lib/puppet
ssldir=/var/lib/puppet/ssl
rundir=/var/run/puppet
factpath=$vardir/lib/facter
templatedir=$confdir/templates

[master]
# These are needed when the puppetmaster is run by passenger
# and can safely be removed if webrick is used.
ssl_client_header = SSL_CLIENT_S_DN 
ssl_client_verify_header = SSL_CLIENT_VERIFY
environmentpath = $confdir/environments
hiera_config = $confdir/hiera.yaml
root@puppet:/etc/puppet# ls
auth.conf  environments  etckeeper-commit-post  etckeeper-commit-pre  fileserver.conf  manifests  modules  puppet.conf  ssl  templates
root@puppet:/etc/puppet# vi heiera.yaml
  "hiera.yaml" [New File]~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            0,0-1All-- INSERT --0,1All---
:backends:  - yaml:hierarchy:  - "%{clientcert}"6  - "%{environment}"
  - global  - defaults:yaml:# datadir is empty here, so hiera uses its defaults:# - /var/lib/hiera on *nix# - %CommonAppData%\PuppetLabs\hiera\var on Windows# When specifying a datadir, make sure the directory exists.  :datadir: "/etc/puppet/environments/%{::environment}/hieradata"15,6615,65All:wq"hiera.yaml" [New] 15L, 368C written
root@puppet:/etc/puppet# vi hiera.yamllscat puppet.conf d ../../..service puppetmaster restart
 * Restarting puppet master        [ OK ]
root@puppet:/etc/puppet# ls
auth.conf  environments  etckeeper-commit-post  etckeeper-commit-pre  fileserver.conf  hiera.yaml  manifests  modules  puppet.conf  ssl  templates
root@puppet:/etc/puppet# cd environments/dev/hieradata/
root@puppet:/etc/puppet/environments/dev/hieradata# ls
defaults.yaml
root@puppet:/etc/puppet/environments/dev/hieradata# vi nodep1.yamlvi nodep1.yaml
  "nodep1.yaml" [New File]~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            0,0-1All-- INSERT --0,1Alls1,2o3m4e5v6a7r8somevar:910n1o2d3e4p516s7p8e9c20i1f2i3c41,23All:wq!"nodep1.yaml" [New] 1L, 24C written
root@puppet:/etc/puppet/environments/dev/hieradata# cat noedep1.yaml 
somevar: nodep1specific
root@puppet:/etc/puppet/environments/dev/hieradata# cd ../../../manifests/
root@puppet:/etc/puppet/manifests# ls
init.pp  nodep1.pp  nodep2.pp  site.pp
root@puppet:/etc/puppet/manifests# vi\cats site.pp 
root@puppet:/etc/puppet/manifests# cat nodep2.pp 
node nodep2{ 
# if $::boxrole == 'webserver' {
exec {'/usr/bin/apt-get update' :} ->  
   class{'apache2':
        apacheport => 9000
   }
#} 
}

root@puppet:/etc/puppet/manifests# [Acat nodep2.pp sitelscd ../../../manifests/lscat site.pp nodep2[Als
init.pp  nodep1.pp  nodep2.pp  site.pp
root@puppet:/etc/puppet/manifests# cat nodep1.pp 
node nodep1 {
   notify{'Welcome': message => "specific to nodep1"}
  # include apache2
class{'apache2':
       apacheport => 8081
}
}
root@puppet:/etc/puppet/manifests# vi nodep1.pp 
  "nodep1.pp" 7L, 135Cnode nodep1 {
   notify{'Welcome': message => "specific to nodep1"}
  # include apache2
class{'apache2':apacheport => 8081
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --1,1All2321223456789y{}102,11All{}234567892012345678930123456789401234567895012{}3}2}1}0}49}8}7}6}5}4}3}2}1}0}39}8}7}6}5}4}3}2}1}0}29}8}7}6}5}4}3}2}1{}2,20All:wq!"nodep1.pp" 7L, 103C written
root@puppet:/etc/puppet/manifests# vi nodep1.pp catlscat nodep2.pp sitelscd ../../../manifests/at nodep1.yaml vi nodep1.yamllscd environments/dev/hieradata/lsservice puppetmaster restart
 * Restarting puppet master        [ OK ]
root@puppet:/etc/puppet/manifests# cd ..
root@puppet:/etc/puppet# vi environments/dev/manifests/noapp.pp 
  "environments/dev/manifests/app.pp" 9L, 215Cnode /nodep[0-9]/ {
   notify{'Welcome': message => "specific to nodep1"}
  # include apache2
   $fromhiera = hiera('somevar')
  notify{"value from hiera $fromhiera":}
class{'apache2':apacheport => 8081
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All2:wq!"environments/dev/manifests/app.pp" 9L, 215C written
root@puppet:/etc/puppet# cd -
/etc/puppet/manifests
root@puppet:/etc/puppet/manifests# vi nodep1.pp 
  "nodep1.pp" 7L, 103Cnode nodep1 {
   notify{'Welcome':}
  # include apache2
class{'apache2':apacheport => 8081
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All:wq!"nodep1.pp" 7L, 103C written
root@puppet:/etc/puppet/manifests# cd ..
root@puppet:/etc/puppet# vi hiera.yaml cd environments/man
root@puppet:/etc/puppet/environments# ls
dev  example_env  prod  production
root@puppet:/etc/puppet/environments# cd dev/manifests/
root@puppet:/etc/puppet/environments/dev/manifests# ls
app.pp
root@puppet:/etc/puppet/environments/dev/manifests# vi app.pp 
  "app.pp" 9L, 215Cnode /nodep[0-9]/ {
   notify{'Welcome': message => "specific to nodep1"}
  # include apache2
   $fromhiera = hiera('somevar')
  notify{"value from hiera $fromhiera":}
class{'apache2':apacheport => 8081
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --1,1All2345672345678910123456789201234565432h3i4e5r6a7(7,28All()7,29All8')9a)30p)1a)2c)3h)4e)5p)6o)7r)8t)9')40()6,17{}5,40(){}4,33All()3,202,412 to nodep1"}1 to nodep1"}0 to nodep1"}39 to nodep1"}8 to nodep1"}7 to nodep1"}6 to nodep1"}5 to nodep1"}4f to nodep1"}5r to nodep1"}6o to nodep1"}7m to nodep1"}894012345678"}7"}6"}5"}4"}3"}2"}1"}0"}39$"}40:"}1:"}2c"}3l"}4i"}5e"}6n"}7t"}8c"}9e"}50r"}1t"}22,51All:wq!"app.pp" 9L, 230C written
root@puppet:/etc/puppet/environments/dev/manifests# cd ..
root@puppet:/etc/puppet/environments/dev# ls
hieradata  manifests  modules  README.environment
root@puppet:/etc/puppet/environments/dev# cd ..
root@puppet:/etc/puppet/environments# ls
dev  example_env  prod  production
root@puppet:/etc/puppet/environments# cd ..
root@puppet:/etc/puppet# ls
auth.conf  environments  etckeeper-commit-post  etckeeper-commit-pre  fileserver.conf  hiera.yaml  manifests  modules  puppet.conf  ssl  templates
root@puppet:/etc/puppet# cd environments/hi
root@puppet:/etc/puppet/environments# ls
dev  example_env  prod  production
root@puppet:/etc/puppet/environments# mkdir hieradata
root@puppet:/etc/puppet/environments# cd hieradata/
root@puppet:/etc/puppet/environments/hieradata# cviui defayults.yaml
  "defaults.yaml" [New File]~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            0,0-1All-- INSERT --0,1Alls1,2o3m4e5v6a7r8somevar:910s1o2m3e4v5a6l7u8e92,1 a2p3a4v54c5h6e7p8o9r10t1apacheport:23840586172,16All:wq!"defaults.yaml" [New] 2L, 36C written
root@puppet:/etc/puppet/environments/hieradata# cd ../dev
root@puppet:/etc/puppet/environments/dev# cd manifests/
root@puppet:/etc/puppet/environments/dev/manifests# vi app.pp 
  "app.pp" 9L, 230Cnode /nodep[0-9]/ {
   notify{'Welcome': message => "from $::clientcert"}
  # include apache2
   $fromhiera = hiera('somevar')
  notify{"value from hiera $fromhiera":}
class{'apache2':apacheport => hiera('apacheport')
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --1,1All234567234567891012345678 => hiera('apacheport')7 => hiera('apacheport')6 => hiera('apacheport')5 => hiera('apacheport')432109 8$apache => hiera('apacheport')9papache => hiera('apacheport')10oapache => hiera('apacheport')1rapache => hiera('apacheport')2tapache => hiera('apacheport')3fapache => hiera('apacheport')4oapache => hiera('apacheport')5rapache => hiera('apacheport')67892012345678930a()17,32All()345678940123()47,45All()8,1All76562345s{


}66,7All{


}8910123456765432109 8{}6,7All}65432178234569,1All234c5l6a7s8s9{
}9,10All{a
}1p2a3c4h5e654321{
}9,10All{'apache
}123456728;98'9:20{
}10,2All{
}9,2010,1All23456789101a2p3a4c5h6e7p8o9t2019r20t12=3>45$portforapache3910,38All:wq!"app.pp" 12L, 283C written
root@puppet:/etc/puppet/environments/dev/manifests# vi app.pp 
  "app.pp" 12L, 283Cnode /nodep[0-9]/ {
   notify{'Welcome': message => "from $::clientcert"}
  # include apache2
   $fromhiera = hiera('somevar')
  notify{"value from hiera $fromhiera":}$portforapache => hiera('apacheport')class{'apache2':apacheport => $portforapache
}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All23456,0-17,1  8910,1{

}1-- INSERT --11,1All }2-9{}11,1-8All0,8  9,8 8,57,891012345678920123458,5 9,1910,25{}1,2-9{{}
}2,1  {{}
}1,2-9{}0,25 9,19 8,5 7,254 hiera('apacheport'):w"app.pp" 12L, 283C written7,24All7,24All:wq"app.pp" 12L, 283C written
root@puppet:/etc/puppet/environments/dev/manifests# cd ../hieradata/
root@puppet:/etc/puppet/environments/dev/hieradata# ls
defaults.yaml  nodep1.yaml
root@puppet:/etc/puppet/environments/dev/hieradata# gre papachp apacheport *
root@puppet:/etc/puppet/environments/dev/hieradata# cat nodep1.yaml 
somevar: nodep1specific
root@puppet:/etc/puppet/environments/dev/hieradata# cat defaults.yaml 
somevar: somevalue
root@puppet:/etc/puppet/environments/dev/hieradata# vi defaults.yaml 
  "defaults.yaml" 1L, 19Csomevar: somevalue
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All:wq"defaults.yaml" 1L, 19C written
root@puppet:/etc/puppet/environments/dev/hieradata# cat *
somevar: somevalue
somevar: nodep1specific
root@puppet:/etc/puppet/environments/dev/hieradata# vi defaults.yaml 
  "defaults.yaml" 1L, 19Csomevar: somevalue
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --2,1Alla2p3a4c5h6e7p8o9r10t1apacheport:23840586076172,16All:wq"defaults.yaml" 2L, 36C written
root@puppet:/etc/puppet/environments/dev/hieradata# cat defaults.yaml 
somevar: somevalue
apacheport: 8081
root@puppet:/etc/puppet/environments/dev/hieradata# 
root@puppet:/etc/puppet/environments/dev/hieradata# 
root@puppet:/etc/puppet/environments/dev/hieradata# 
root@puppet:/etc/puppet/environments/dev/hieradata# cd cd ../../mandev/mancd ../naimanifests/app
root@puppet:/etc/puppet/environments/dev/manifests# vi app.pp
  "app.pp" 12L, 283Cnode /nodep[0-9]/ {
   notify{'Welcome': message => "from $::clientcert"}
  # include apache2
   $fromhiera = hiera('somevar')
  notify{"value from hiera $fromhiera":}$portforapache = hiera('apacheport')class{'apache2':apacheport => $portforapache}
}
~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            ~                                                                                                                                                                                            1,1All-- INSERT --1,1All2123456789101p[0-9]21,13All[0-9]45[0-9]61,17All[0-9]8 {}91,20All{}2,1All3,1All23,1Allp2a3c4k5a6g7e8{}3,9All{'}10g1i2t3'4:56{}3,17All{}4,1All5,1Allvcsrepo { '/path/to/repo':
  ensure   => latest,
  provider => git,source   => 'git://example.com/repo.git',
  revision => 'master',}notify{'Welcome': message => "from $::clientcert"}
  # include apache2
   $fromhiera = hiera('somevar')
  notify{"value from hiera $fromhiera":}       $portforapache = hiera('apacheport')
        class{'apache2':          apacheport => $portforapache        }}10,2All{}9,2 8783456789101234567892012345678930123456789401232',1',0',39',8',7',6',5',4',3',2',1',0',29',8',7',6',5',4',3',2',1',0',19',8',7',6h',7t',8t',9p',20s',1:',2/',3/',4g',5i',6t',7h',8u',9b',30.',1c',2o',3m',4/',5A',6d',7i',8t',9y',40a',1S',2P',3/',4p',5',4',3',2',1',0',39',8',7',6',5',4',3',2',1',0',29',8',7',6',5',4',3',2',1',0',19',8',7',6https://github.com/AdityaSP/puppetcode',547,196,225,274,1 5,2765':4':3':2':1':0':19':8':7':6':5':4':3v':4a':5r':6/':7w':8w':9w':20/':1h':2t':3m':4l':5/':6p':7r':8o':9j':306,227,198,309,24{}10,2All{}1,12,303,24,356,1 ()7,30()8,6 9,2020,3{}21,3-10All{{}
}22,2All{{}
}21,3-10All{}22,1All23456789c10l1a2s3s4[22,15All[]22,16All5']6a]7p]8a]9c]20h]1e]22]3']422,25All[]-6>7V8c9s302987v8c9s30r1e2p3o4[22,35All'6/7v8a9t4039r40/1w2w3w4/5h6t7m8l9/50p1t21r2o3j4'5[]22,56All[]23,1All23456789p10a1c2k3a4g5e62[]22,15All4[]3210lass['apache2']->vcsrepo['/var/www/html/proj']9 Class['apache2']->vcsrepo['/var/www/html/proj']1039 package89ackage8Package9210123s[]422,15All[]678920123[]422,25All[]678csrepo['/var/www/html/proj']7Vcsrepo['/var/www/html/proj']83,15[23,16All'7g8i9t20'1['git']23,22All['git']-3>4V5c6s7r8e9p30o1https://github.com/AdityaSP/puppetcode6987654321059876543210498765432103987654321['/var/www/html/proj'52[]23,53All{[]
}24,2All24,1All:wq!"app.pp" 24L, 567C written
root@puppet:/etc/puppet/environments/dev/manifests# puppet module install puppetlabs-vcsrepo --version 2.4.0
Warning: Setting templatedir is deprecated. See http://links.puppetlabs.com/env-settings-deprecations
   (at /usr/lib/ruby/vendor_ruby/puppet/settings.rb:1139:in `issue_deprecation_warning')
Notice: Preparing to install into /etc/puppet/modules ...
Notice: Downloading from https://forgeapi.puppetlabs.com ...
Notice: Installing -- do not interrupt ...
/etc/puppet/modules
 puppetlabs-vcsrepo (v2.4.0)
root@puppet:/etc/puppet/environments/dev/manifests# 
root@puppet:/etc/puppet/environments/dev/manifests# puppet module install puppetlabs-vcsrepo --version 2.4.0vi app.ppcd ../manifests/at defaults.yaml vicat *vi defaults.yaml catnodep1grep apacheport *lscd ../hieradata/vi app.pp cd manifests/../devvi defaults.yamlcd hieradata/mkdir hieradatalscd environmentslscd ..lscd ..lscd ..vi app.pp lscd dev/manifests/lscd environments/..vi nodep1.pp cd -vi environments/dev/manifests/app.pp cd ..service puppetmaster restartvi nodep1.pp catlscat nodep2.pp sitelscd ../../../manifests/at nodep1.yaml vi nodep1.yamllscd environments/dev/hieradata/lsservice puppetmaster restartvi hiera.yamllscat puppet.conf d ../../..service puppetmaster restartcat defaults.yaml vi ../manifests/app.ppcat defaults.yamlvi defaults.yamlcd hieradatamkdir ../prod/hieradatahieradatacd devlscd environments/vi puppet.confcd ../../..vi app.pp puppet cert sign nodep2.in.oracle.comlist --allvi app.pplscd manifests/lscd prodp -r devls -latrcd ../environments/service puppetmaster statusrestartcat site.pp lscat /dev/null > site.pp lscd manifests/../../..at app.pp vicat app.pplscp /etc/puppet/manifests/nodep1.pp app.ppd manifests/lscd devlscd devlscd manifests/p /etc/puppet/manifests/nodep1.pp app.pplscat app.ppvi app.pp catd ../../..manifests/lscat dev/null > site.pp /lscat site.pp service puppetmaster restartstatuscd ../environments/ls -latrcp -r dev proddlscd manifests/lsvi app.pppuppet cert list --allsign nodep2.in.oracle.comvi app.pp cd ../../..vi puppet.confcd environments/lscd devmkdir hieradata../prod/hieradatacd hieradatavi defaults.yamlcat defaults.yaml vi ../manifests/app.ppcat defaults.yamlservice puppetmaster restartcd ../../..at puppet.conf lsvi hiera.yamlservice puppetmaster restartlscd environments/dev/hieradata/lsvi nodep1.yamlcat nodep1.yaml d ../../../manifests/lscat site.pp lscd ../../../manifests/at nodep1.yaml vi nodep1.yamllscd environments/dev/hieradata/lsservice puppetmaster restartvi hiera.yamllscat puppet.conf d ../../..service puppetmaster restartcat defaults.yaml vi ../manifests/app.ppcat defaults.yamlvi defaults.yamlcd hieradatamkdir ../prod/hieradatahieradatacd devlscd environments/vi puppet.confcd ../../..vi app.pp puppet cert sign nodep2.in.oracle.comlist --allvi app.pplscd manifests/lscd prodp -r devls -latrcd ../environments/service puppetmaster statusrestartcat site.pp lscat /dev/null > site.pp lscd manifests/../../..at app.pp vicat app.pplscp /etc/puppet/manifests/nodep1.pp app.ppd manifests/lscd devlscp -r example_env/ devtree example_env/apt-get install treetree example_env/lscd environments/atvi puppet.conf ls -ltracd /etc/puppet/exitvi nodep2.pp catvisitenodep2lscd /etc/puppet/manifests/lspuppet cert listcdvi nodep1.pp sitelsvi nodep2.ppcd manifests/puppet cert sign nodep2.wifi.oracle.comlistvi modules/apache2/manifests/init.pp cat manifests/nodep1odules/apache2/manifests/initd ..vi nodep1.pp morelscd manifests/../../..lsvi init.pp lscd modules/apache2/manifests/..vi init.pp lscd manifests/lscd ../../..lscd files/lscd ..vi ports.conf.erb lscd templates/mv files/ports.conf templates/ports.conf.erbkdir templateslscd apache2/modules/....lscd manifests/lscd /etc/puppet/lsvi modules/apache2/manifests/init.pp cat manifests/nodep1lscd ../..vi init.pp lscd manifests/lscd ..at ports.conf vilscd files/lscat manifests/init.pp vicd modules/apache2/lsvi manifests/nodep1.pp catlscd ../...lsdcd manifests/lscd apache2/lscd ../..lsvi init.pp morelscd ../manifests/lscd apache2/files/lscd modules/..lsmore init.pp lsscp vagrant@nodep1:/tmp/init.pp .lscd manifests/../../..exit
logout
vagrant@puppet:~$ exit
logout
